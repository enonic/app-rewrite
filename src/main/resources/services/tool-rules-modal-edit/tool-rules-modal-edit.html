<div class="modal-guts create-context" id="tool-rules-modal-create-rule">

    <div class="modal-content">
        <h1>Edit rule</h1>

        <form class="form-grid" data-th-id="${form.id}">
            <label for="editRuleContextKeyShow">VirtualHost</label>
            <input type="text" id="editRuleContextKeyShow" name="editRuleContextKeyShow" data-th-value="${contextKey}"
                   disabled="disabled"
                   readonly="readonly"/>

            <input type="hidden" id="editRuleContextKey" name="editRuleContextKey" data-th-value="${contextKey}"
                   readonly="readonly"/>

            <input type="hidden" id="editRuleId" name="editRuleId" data-th-value="${rule.ruleId}"
                   readonly="readonly"/>

            <label for="sourceUrl">URL</label>
            <input type="text" id="sourceUrl" disabled="disabled" readonly="readonly" data-th-value="${source.url}"/>

            <input type="hidden" id="originalRulePattern" name="originalRulePattern" data-th-value="${rule.pattern}"/>

            <label for="editRulePattern">Pattern (source path)</label>
            <input type="text" id="editRulePattern" name="editRulePattern" data-th-value="${rule.pattern}"/>

            <label for="editRuleSubstitution">Substitution (target path)</label>
            <input type="text" id="editRuleSubstitution" name="editRuleSubstitution" data-th-value="${rule.substitution}"/>

            <label for="editRuleType">Redirect-type</label>
            <select id="editRuleType" name="editRuleType">
                <option value="MOVED_PERMANENTLY" data-th-selected="${selected == 'MOVED_PERMANENTLY'}">MOVED_PERMANENTLY</option>
                <option value="TEMPORARILY_REDIRECT" data-th-selected="${selected == 'TEMPORARILY_REDIRECT'}">TEMPORARILY_REDIRECT</option>
            </select>

            <label for="editInsertPosition">Position</label>
            <input id="editInsertPosition" name="editInsertPosition" type="number" data-th-min="0" data-th-max="${source.maxPosition}"
                   data-th-value="${rule.order}">

            <button class="modal-action"
                    data-action-type="edit-rule"
                    data-refresh-data-selector="#toolRulesRulesTable,#toolContextContextTable"
                    data-th-attr='data-tool-key=tool-rules,data-form=${form.id}'>Save
            </button>
            <button class="modal-cancel">Cancel
            </button>
        </form>

        <div class="helptext">
            <p>
                Make sure to encode URLs in <b>Source path</b> and <b>Target path</b> if they contain URI-illegal characters.<br/>
                Example: <samp>smørbrød.no -> sm%C3%B8rbr%C3%B8d.no</samp>
            </p>
        </div>
    </div>
</div>
