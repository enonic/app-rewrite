<div class="modal-guts create-context" id="tool-rules-modal-create-rule">

    <div class="modal-content">
        <h1>Create rule</h1>

        <form class="form-grid" data-th-id="${form.id}">
            <label for="createRuleContextKeyShow">VirtualHost</label>
            <input type="text" id="createRuleContextKeyShow" name="createRuleContextKeyShow" data-th-value="${contextKey}"
                   disabled="disabled"
                   readonly="readonly"/>

            <input type="hidden" id="createRuleContextKey" name="createRuleContextKey" data-th-value="${contextKey}"
                   readonly="readonly"/>

            <label for="sourceUrl">URL</label>
            <input type="text" id="sourceUrl" disabled="disabled" readonly="readonly" data-th-value="${source.url}"/>

            <label for="createRuleSource">Pattern (source path)</label>
            <input type="text" id="createRuleSource" name="createRuleSource" placeholder="regexp, e.g /my/path/(.+)"/>

            <label for="createRuleTarget">Substitution (target path)</label>
            <input type="text" id="createRuleTarget" name="createRuleTarget" placeholder="regexp-replace, e.g /redirected/$1"/>

            <label for="createRuleType">Redirect-type</label>
            <select id="createRuleType" name="createRuleType">
                <option value="MOVED_PERMANENTLY">MOVED_PERMANENTLY</option>
                <option value="TEMPORARILY_REDIRECT" selected="selected">TEMPORARILY_REDIRECT</option>
            </select>

            <label for="insertStrategy">InsertStrategy</label>
            <select id="insertStrategy" name="insertStrategy">
                <option value="first">First</option>
                <option value="last" selected="selected">Last</option>
                <option value="position">Position</option>
            </select>

            <label for="insertPosition" style="display: none;">Position</label>
            <input id="insertPosition" name="insertPosition" type="number" min="0" data-th-max="${source.maxPosition}" style="display: none;">

            <button class="modal-action"
                    data-action-type="create"
                    data-refresh-data-selector="#toolRulesRulesTable,#toolContextContextTable"
                    data-th-attr='data-tool-key=tool-rules,data-form=${form.id}'>Save
            </button>
            <button class="modal-cancel">Cancel
            </button>
        </form>

        <div class="helptext">
            <p>
                Make sure to encode URLs in <b>Source path</b> and <b>Target path</b> if they contain URI-illegal characters.<br/>
                Example: <samp>smørbrød.no -> sm%C3%B8rbr%C3%B8d.no</samp>
            </p>
        </div>


    </div>

</div>
