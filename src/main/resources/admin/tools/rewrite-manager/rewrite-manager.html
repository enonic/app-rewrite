<html>
<head>
    <title>Rewrite Manager</title>
    <link rel="icon" href="favicon.svg" data-th-href="${portal.assetUrl({'_path=icons/favicon.svg'})}">
    <link rel="stylesheet" data-th-href="${portal.assetUrl({'_path=css/main.css'})}"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/v/bs4-4.1.1/dt-1.10.21/b-1.6.2/b-html5-1.6.2/datatables.min.css"/>

    <script type="text/javascript" data-th-inline="javascript">
        /*<![CDATA[*/
        const CONFIG = {
            licenseUrl: /*[[${licenseUrl}]]*/,
            svcUrl: /*[[${svcUrl}]]*/
        };
        /*]]>*/
    </script>
</head>
<body>

<div class="rewrite-manager">

    <aside id="top-nav">

        <div class="logo"><p>Rewrite Manager</p></div>
        <div data-th-class="${'license' + (licenseValid ? ' visible' : '')}">
            <span id="licenseText" data-th-text="${licenseText}"></span>
        </div>
    </aside>

    <aside id="top-info-bar" data-th-class="${error ? 'visible' : ''}">
        <div class="error-message" data-th-classappend="${errorMessage!='' ? 'visible' : ''}">
            <span data-th-remove="tag" data-th-text="${errorMessage}"></span>
        </div>
        <div class="license-state" data-th-classappend="${licenseValid ? '' : 'visible'}">
            <form method="POST" action="" enctype="multipart/form-data">
                <input id="upload-license" autocomplete="off" name="licenseFile" type="file" style="display:none;"/>
                <span>Rewrites are disabled. Click <label class="upload-license-link" for="upload-license">here</label> to upload a valid license</span>
            </form>
        </div>

    </aside>
    <!--

    -->

    <div id="main">

        <nav id="side-nav">

            <aside class="tool-nav-info">
                <p></p>
            </aside>

            <div class="tool-nav selected" id="nav-tool-context" data-activator="tool-context">
                <div class="toolIcon"><i class="material-icons">call_split</i></div>
                <div class="toolName"><p>Virtual Hosts</p></div>
            </div>

            <div class="tool-nav" id="nav-tool-rules" data-activator="tool-rules">
                <div class="toolIcon"><i class="material-icons">list</i></div>
                <div class="toolName"><p>Rules</p></div>
            </div>

            <div class="tool-nav" id="nav-tool-tester" data-activator="tool-tester">
                <div class="toolIcon"><i class="material-icons">flight_takeoff</i></div>
                <div class="toolName"><p>Request Tester</p></div>
            </div>

            <div class="tool-docs">
                <a href="https://github.com/enonic/app-rewrite#rewrite-app-for-enonic-xp" target="_blank">Documentation</a>
            </div>
        </nav>

        <!-- Here is the tools in the main window -->

        <div id="tools-window">
            <div id="tool-context" class="tool loadable-tool selected"></div>
            <div id="tool-rules" class="tool loadable-tool"></div>
            <div id="tool-tester" class="tool loadable-tool"></div>
        </div>

        <div class="modal-overlay closed" id="modal-overlay"></div>
    </div>
</div>


<div id="bottom-bar" class="info-bar bottom hidden">
    <p>This is some info</p>
</div>

<script type="text/javascript" src="https://cdn.datatables.net/v/dt/jq-3.3.1/dt-1.10.23/datatables.min.js"></script>
<script data-th-src="${portal.assetUrl({'_path=js/main.js'})}"></script>
</body>
</html>
